## 简介

<!-- 此处应有 gif 动图 -->

为在线漫画站增加双页阅读模式以优化阅读体验，并通过[页面填充](#页面填充)功能
对于支持站点以外的网站，如果能够在一个页面内显示所有漫画页图片一屏到底的话，也可以打开浏览器的油猴扩展菜单，点击脚本的「进入漫画阅读模式」直接阅读。否则欢迎反馈申请支持。

## 安装

1. 首先需要浏览器装有 [Tampermonkey](https://tampermonkey.net/) 之类的油猴扩展
2. 通过 GreasyFork 安装脚本：[点我](https://greasyfork.org/zh-CN/scripts/374903-comicread)

## 使用

进入脚本支持站点时，会在右下角弹出一个悬浮按钮，直接点击可以进入阅读模式，通过其上的快捷按钮可以开启/关闭相关功能。脚本默认开启自动加载功能，在打开页面时就会自动加载图片并进入阅读模式，可在设置中关闭。

## 阅读模式操作

### 翻页

- 鼠标滚轮滚动
- 上下左右方向键、WASD、逗号句号、PageUp/PageDown
- 支持触屏的设备会自动打开「点击翻页」功能，也可以到设置中自行打开

### 缩放

- 双击
- Alt + 滚轮
- 双指捏合 // TODO: 待测试

进入缩放模式后就可以直接用滚轮调整缩放程度了

### 其他

- Home、End 快速跳到漫画头尾
- Esc 退出阅读模式
- 「/」「m」「z」切换页面填充

## 简易漫画阅读模式

用于在支持站点以外的网站阅读漫画。开启后，将把当前网页中显示的所有宽高均大于 500 像素的图片作为图源加载。并且之后再次进入站点会自动运行脚本在右下角弹出阅读按钮，享受和其他支持站点一样的体验。

## 支持网站

部分网站除适配阅读模式外，还添加了一些增强功能，可点击跳转查看详情

- [百合会](#百合会)
  - [记录阅读历史](#记录阅读历史)
  - [体验优化](#体验优化)
- 百合会新站
- [动漫之家](#动漫之家)
  - 解锁隐藏漫画
  - 解除吐槽的字数限制
- [ehentai](#ehentai)
  - [nhentai 匹配](#nhentai匹配)
- [nhentai](#nhentai)
  - [彻底屏蔽漫画](#彻底屏蔽漫画)
  - [自动翻页](#自动翻页)
- 禁漫天堂
- 动漫屋(dm5)
- 漫画柜(manhuagui)
- 漫画 DB(manhuadb)
- 拷贝漫画(copymanga)
- 漫画猫(manhuacat)
- mangabz

### 百合会

#### 记录阅读历史

这个功能是用来快速回到帖子上次阅读进度的。开启后，每个帖子后面都会跟着一个跳转至上次阅读位置的TAG，点击即可跳转至上次阅读进度（阅读进度不仅包括了页数也包括了楼层数），后面跟着的数字是上次阅读后新增的回复数。

![](http://wx3.sinaimg.cn/large/6d4090c8gy1frkpi4a2ikj207u00yq2q.jpg)

#### 关闭快捷导航的跳转

顶部导航条的快捷导航可以方便地在各个板块之间跳转，但默认情况下只能通过鼠标悬浮的方式显示其板块菜单，直接点击的话会跳转至论坛主页，这在平板上很不方便，所以有了这个功能。功能很简单，就是关掉快捷导航的点击跳转，只保留悬浮显示菜单的功能。

#### 固定导航条

快捷导航的跳转是很方便，但每次跳转都要把网页滚到顶部去就有点麻烦了。开启这个功能可以将顶部的导航条固定住，不管怎么滚动都始终保持在页面顶部。

#### 修正点击页数时的跳转判定

![](http://wx3.sinaimg.cn/large/6d4090c8gy1frkqbxkztij20vb01c0sn.jpg)

明明在板块顶部有个“新窗”的选项来选择帖子的默认打开位置，但即使勾上了新窗，通过点击帖子后面的页数打开的页面还是会在当前页打开。开启这个功能可以补上这个缺漏。

### 动漫之家

出于个人喜好使用了 [pgain2004](https://userstyles.org/users/301332) 的 [动漫之家暗色调漫画阅读页(布局精简)](https://userstyles.org/styles/119945/theme) css 样式进行了美化，在此表示感谢。不喜欢暗色调的话也可以调成白色的，漫画页的色调和阅读模式中夜间模式的相关联。

### ehentai

![](https://greasyfork.org/system/screenshots/screenshots/000/013/160/original/Snipaste_2018-11-28_17-12-03.png)

在漫画详情页右侧边栏会多出一个「Load comic」按钮，点击后开始加载漫画，加载完毕后按钮变为「Read」，点击开始阅读。

#### nhentai匹配

![](https://greasyfork.org/system/screenshots/screenshots/000/013/161/original/Snipaste_2018-11-28_17-15-42.png)

根据漫画标题匹配 nhentai 的本子，结果会以标签的形式显示在标签栏中，标签内容为 nhentai 上的漫画 ID ，鼠标悬停在标签上可以看到漫画标题。
点击标签后，标签菜单有两个选项：「Jump to nhentai」—— 跳转至对应的 nhentai 网页、「Load comic」—— 直接在当前页加载 nhentai 的资源，加载完后可以直接用阅读模式阅读。相比 ehentai，nhentai 的资源加载更快，而且不会消耗配额。也可以直接右键标签点击「在新标签页中打开」跳至 nhentai。

### nhentai

在漫画详情页收藏按钮的旁边会多出一个「Load comic」按钮，点击后开始加载漫画，加载完毕后按钮变为「Read」，点击开始阅读。

#### 彻底屏蔽漫画

nhentai 的屏蔽机制是在被屏蔽漫画封面加上一层半透明遮罩，所以对于那些屏蔽范围比较大的人来说，在首页或搜索结果里连续翻上几页都是满屏的被屏蔽漫画完全是家常便饭。开启此功能后，被屏蔽漫画将被彻底屏蔽，不会再出现在首页或搜索结果里了。

#### 自动翻页

当网页滚动至底部时将自动在底部加载下一页的内容，加载时底部会有加载条表示正在加载，当加载条停止时表示已到最后页。
如果同时开启了「彻底屏蔽漫画」功能，将自动跳过没有结果的页面。

## 页面填充

> 太长不看：当跨页图被分割成两半且没有正确合并显示时，切换一下开启状态即可

> 如果你在用双页模式阅读漫画时完全没有违和感，那这段不看也没事的。否则在了解后可能就会因为意识到违和感的存在，而在阅读部分漫画时要不停的调整页面填充，也有可能出现不管怎么调整都觉得不对的情况
> 但如果你不是强迫症敏感体质、追求接近翻阅实体书的体验、希望了解页面填充功能，那还是推荐阅读的。

日漫一般奇数页在左，偶数页在右，所以为了保证左右页的位置正确，默认会在第1页填充进一个空白页用以填补右页的空白。如果之后的图片流顺序正确的话，也只需要如此即可保证左右正确。
但因为各种各样的原因——汉化组删掉了单行本中间的空白页、将跨页图分成了左图全图右图三张图、作者在第一页的右页写了序所以也被扫了图等——导致图片流的左右页顺序乱掉，为了之后左右页能正确显示，就必须使用页面填充功能手动加上填充页。

TODO: 配图，对比图

| ❌ | ✔️ |
| ---- | ---- |
| 左右 | 左右 |
| 右左 | 左右 |
| 右左 | 左右 |
| 右左 | 左右 |
| 图 | 图 |

如果图片流中没有出现跨页大图，那「页面填充」的影响范围就是整个图片流；如果出现了一张跨页大图，以跨页大图为分割点，「页面填充」的影响范围将被分为两个。以此类推，图片流中出现的跨页大图将整个图片流分割为多块独立的流。通过侧边栏的页面填充按钮可以查看和修改当前流的「页面填充」的状态。

关于如何判断页面的左右页位置是否正确。一般来说，如果页数没被处理掉的话，直接将漫画页数调整到左奇右偶即可，不过一般漫画的页数都被汉化组处理掉了。没有页数的情况下，如果漫画图源够好，并且汉化组没有进行白边剪裁的话，在漫画顺序正确的情况下中间会有比较大的白边——即书的中缝，可以根据这一点来进行调整。如果汉化组进行了白边剪裁的话，就只能凭经验判断了：)

TODO: 配图

| ❌ | ✔️ |
| ---- | ---- |
| 图 | 图 |

<!-- 放到 releases 的版本介绍 -->

## 破坏性改动

- ehentai 删掉了匹配 nhentai 标签的功能（当初拍脑袋写的功能之后一次都没用过，应该也没人用这个吧，有的话再加回来
- 在支持站点增加了右下角的悬浮按钮作为阅读模式按钮。原先嵌在页面上虽然和页面风格比较统一，但如果没看文档或者太久没用的话有可能要找半天才能找到（没错就是本人），所以干脆统一使用右下角的悬浮按钮。不过一些常用站点我自己都点习惯了所以之前的按钮还是会保留。
